Key points from various contests

USACO 2022 Dec Silver Problem 1: Barn Tree


- Tree DP
- Assume subtree v works, DFS u = make subtree u work without changing v
- Only moves are to take or give to parent
- Problem is might take more than parent has, therefore need to change order of operations
- How to order operations?
- 1. Sort children based on sum of h[i] within child subtree
- 2. Topological sort technique

USACO 2022 Dec Silver Problem 2: Circular Barn

- Prime numbers: Sieve, O(sqrt(N)) to get factors
- How many prime numbers less than 5e6? 
- Farmer John loses N=1 when a1 = 0 (mod 4)
- Precompute for each prime how long it take for it to become 0
- Find first barn to become 0, that determines who wins

USACO 2022 Dec Silver Problem 3: Range Reconstruction

- Assume 1 .. i works then add i+1
- Only need to check a[i][i+1] to make array !
- 2 choices for each element ans[i-1] + a[i][i+1], ans[i-1] - a[i][i+1], if one doesn't work take the other


DMOPC 2022 Contest 2 P2: Line Trace

- Answer is number of inversions
- A connector that connects line i with i+1 swaps i and i+1 in the answer

YAC 5 P2: Big Score

- Lexographically greatest array must be Josh
- Since each of Josh's moves removed two coins from a vault and added one coin to a vault left of vault , the leftmost vault operated on by Josh must contain more coins than it had originally.
- Conversely, since each of Nils's moves removed two coins from a vault  and added one coin to a vault right of vault , the leftmost vault operated on by Nils must contain fewer coins than it had originally.
- Lexographically smallest array is Nils

AAC 7 P3: Squirrel Scramble

- Only ever use portal once, arrive at nearest portal to destination
- For node i, there will always be a k such that it is optimal to walk to each node from i to k-1 and use a portal to reach node k ... n

AAC 4 P2: Lavish Lights

- Array b where b[i] is the LCM of a[1] ... a[i]
- Stop when b > 1e9 !! (because t[i] <= 1e9 and cannot be a multiple of anything > 1e9)
- Binary search for last index i such that t[i] = 0 (mod b[i])
- i+1 is answer

AAC 4 P3: Snowy Slopes

- x[j]-x[i]/y[j] - y[i] = k[a]/d[a] for indices i, j, a
- d[a](x[j] - x[i]) = k[a](y[j]-y[i])
- d[a]*x[j] - k[a]*y[j] = d[a]*x[i] - k[a]*y[i]
- store frequency counts of d[a]*x[i] - k[a]*y[i] for each a and i
- combinatorics to get answer 

DMOPC 2021 Contest 5 P1: Permutations & Primes

- Odds on one side, evens on the other
- Pick constant a, b to be middle such that a is odd and b is even (eg. 5, 4)
- Answer will be all odd numbers <= n other than 5 ... 5 4 ... all even numbers <= n other than 4

DMOPC 2021 Contest 5 P2: Permutations & Primes

- N = 1 return 1
- N = 2 return -1
- N = 3 works with answer 1 3 2
- Claim: if N-1 works N works too
- Add a number to the end will never get prime sum
- Sum of N numbers is N*(N+1)/2 which is always composite if N >= 3 because it is product of two numbers, N and (N+1)/2

DMOPC 2021 Contest 5 P3: Permutations & Primes

- if N <= 2 return -1
- Precalculate all primes and whether permutation 1.. N is winning
- Winner will either be 1.. N, 1.. N-2 N N-1, or 1 .. N N-2 N-1 respectively
- 1...N-2 N N-1 and 1.. N N-2 N-1 same as 1 ... N-1 and 1... N-2 because since you cant go right N is basically N-1 or N-2 respectively
- Therefore we can precalculate and answer in O(1)


